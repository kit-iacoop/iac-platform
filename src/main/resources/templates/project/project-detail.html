<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="fragments/portal/head :: template-head('산학 프로젝트 조회')"></div>
    <link rel="stylesheet" href="/assets/css/form-style.css">
    <style>
        .tab-content-container > div {
            border: 2px solid black;
            margin: 2rem;
        }

        input[name='midFiles[]'], input[name='finalFiles[]'] {
            display: none;
        }

        div.MultiFile-label button {
            padding-top: 0rem;
            padding-bottom: 0.5rem;
        }

        .file-list {
            border: 1px solid #c9c9c9;
            min-height: 8rem;
        }

        div.MultiFile-label {
            border-left: 2px solid #a0a0a0;
            margin: 0.5rem;
            padding: 0.5rem;
        }
    </style>
</head>

<body>
<div th:replace="fragments/portal/header :: template-header"></div>

<main id="main" data-aos="fade-up">

    <!-- ======= Breadcrumbs Section ======= -->
    <section class="breadcrumbs">
        <div class="container">

            <div class="d-flex justify-content-between align-items-center">
                <h2>Collaboration Details</h2>
                <ol>
                    <li><a href="/">Home</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li>Portfolio Details</li>
                </ol>
            </div>

        </div>
    </section><!-- Breadcrumbs Section -->

    <!-- ======= Portfolio Details Section ======= -->
    <section id="collabo-project" class="collabo-details">
        <div class="container">
            <div class="row gy-4">
                <div class="form-container">
                    탭으로 구현할 예정
                    <div>
                        <button type="button">프로젝트 정보</button>
                        <button type="button">중간 결과물 관리</button>
                        <button type="button">최종 결과물 관리</button>
                        <button type="button">매출 관리</button>
                    </div>
                    <div class="tab-content-container">
                        <div>
                            <h4>프로젝트 정보</h4>
                            프로젝트 명   [[${projectDto.title}]](디비에 필드 없음)<br>
                            기업   [[${projectDto.companyName}]]<br>
                            참여 교수 리스트<br>
                            프로젝트 기간 [[${projectDto.startDate}]] ~ [[${projectDto.endDate}]]<br>
                            인건비   [[${projectDto.budgetDetail.humanCostRate}]]<br>
                            연구활동비   [[${projectDto.budgetDetail.researchActivityRate}]]<br>
                            간접비   [[${projectDto.budgetDetail.indirectCostRate}]]<br>
                            총 예산액   [[${projectDto.budgetDetail.total}]]<br>
                            매칭 정보<br>
                            상담 리스트<br>
                        </div>
                        <div>
                            <h4>중간 결과물 관리</h4>
                            <h5>등록된 결과물</h5>
                            이미 등록된 파일 리스트를 보여줄 예정<br>
                            다운로드 받을 수 있는 버튼<br>
                            체크박스 선택 후 삭제하기 버튼
                            <h5>결과물 추가하기</h5>
                            <form th:action="@{/projects/list/{id}/mid-output(id=${projectDto.projectId})}" method="post" enctype="multipart/form-data">
                                <div id="file-list-mid" class="file-list"></div>
                                <button type="button" id="fileUploadLbl-mid" class="btn btn-outline-secondary">파일 가져오기</button>
                                <input type="file" name="midFiles[]">
                                <input type="submit" class="btn btn-outline-secondary" value="파일 등록">
                            </form>
                        </div>
                        <div>
                            <h4>최종 결과물 관리</h4>
                            <h5>등록된 결과물</h5>
                            이미 등록된 파일 리스트를 보여줄 예정<br>
                            다운로드 받을 수 있는 버튼<br>
                            체크박스 선택 후 삭제하기 버튼
                            <h5>결과물 추가하기</h5>
                            <form th:action="@{/projects/list/{id}/final-output(id=${projectDto.projectId})}" method="post" enctype="multipart/form-data">
                                <div id="file-list-final" class="file-list"></div>
                                <button type="button" id="fileUploadLbl-final" class="btn btn-outline-secondary">파일 가져오기</button>
                                <input type="file" name="finalFiles[]">
                                <input type="submit" class="btn btn-outline-secondary" value="파일 등록">
                            </form>
                        </div>
                        <div>
                            <h4>매출 관리</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section><!-- End Portfolio Details Section -->

</main><!-- End #main -->

<div th:replace="fragments/portal/footer :: template-footer"></div>
<div th:replace="fragments/portal/js :: template-js"></div>

<script src="https://cdn.jsdelivr.net/npm/jquery-multifile@2.2.2/jquery.MultiFile.min.js" type="text/javascript"></script>
<script>
    $(function() {
        $('input[name=\'midFiles[]\']').MultiFile({
            max: 50,
            maxfile: 1024,
            list: '#file-list-mid',
            STRING: {
                remove: '<button type="button" class="btn-close"></button>',
                duplicate: '\'$file\'은(는) 중복된 파일입니다.'
            }
        });

        $('input[name=\'finalFiles[]\']').MultiFile({
            max: 50,
            maxfile: 1024,
            list: '#file-list-final',
            STRING: {
                remove: '<button type="button" class="btn-close"></button>',
                duplicate: '\'$file\'은(는) 중복된 파일입니다.'
            }
        });

        $('#fileUploadLbl-mid').on('click', function () {
            $('input[name=\'midFiles[]\']').each(function (idx, item) {
                if (!$(item).attr('style'))
                    $(item).click();
            });
        });

        $('#fileUploadLbl-final').on('click', function () {
            $('input[name=\'finalFiles[]\']').each(function (idx, item) {
                if (!$(item).attr('style'))
                    $(item).click();
            });
        });
    });
</script>
</body>

</html>